Система учёта клиентов для парикмахеров

Проект представляет собой Telegram-бота для управления клиентской базой парикмахерских. Система позволяет добавлять, просматривать и удалять клиентов через удобный интерфейс Telegram.
🚀 Технологии

    Java 17
    Spring Boot 3.x
    PostgreSQL - реляционная база данных
    Spring Data JPA - работа с базой данных
    Telegram Bot API - интеграция с Telegram
    Liquibase - управление миграциями базы данных

🏗️ Архитектура
```
┌─────────────────────────────────────────────────────────────┐
│                    АРХИТЕКТУРА ДИАЛОГОВ                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐      │
│  │   UPDATE    │    │   БОТ       │    │ ДИСПЕТЧЕРЫ  │      │
│  │  Telegram   │───▶│ UserListBot │──▶│             │      │
│  │             │    │             │    │  ┌───────┐  │      │
│  └─────────────┘    └─────────────┘    │  │Command│  │      │
│        │                               │  └───────┘  │      │
│        │ text                          │       │     │      │
│        ▼                               │       ▼     │      │
│  ┌─────────────┐                       │  ┌─────────┐│      │
│  │  КОМАНДА    │                       │  │Dialog   ││      │
│  │   /start    │◀─────────────────────┼──│Registry ││      │
│  └─────────────┘                       │  └─────────┘│      │
│        │                               │       │     │      │
│        │ callback                      │       ▼     │      │
│        ▼                               │  ┌────────┐ │      │
│  ┌─────────────┐                       │  │Активный│ │      │
│  │ CALLBACK    │                       │  │диалог? │ │      │
│  │"CREATE_USER"│◀─────────────────────┼──┤    ❌  │ │      │
│  └─────────────┘                       │  └────────┘ │      │
│                                        │       │     │      │
│                                        │       ▼     │      │
│                                        │  ┌────────┐ │      │
│                                        │  │Command │ │      │
│                                        │  │Handler │ │      │
│                                        │  └────────┘ │      │
│                                        │             │      │
│                                        └──────┬──────┘      │
│                                               │             │
│                                               ▼             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │               БАЗОВЫЙ ДИАЛОГ (BaseDialogService)    │    │
│  │  ┌───────────────────────────────────────────────┐  │    │
│  │  │ Состояние: Map<chatId, DialogContext>         │  │    │
│  │  │  • data: Map<String, Object> (имя, телефон...)│  │    │
│  │  │  • currentStep: "name" → "phone" → "email"    │  │    │
│  │  │  • awaitingCancelConfirmation: true/false     │  │    │
│  │  └───────────────────────────────────────────────┘  │    │
│  │                                                     │    │
│  │  Методы:                                            │    │
│  │  1. startDialog() → onStart()                       │    │
│  │  2. processInput() → onProcessInput()               │    │
│  │  3. processCallback() → onProcessCallback()         │    │
│  │  4. АВТОМАТИЧЕСКИ: кнопка "❌ Отмена"               │    │
│  │  5. АВТОМАТИЧЕСКИ: подтверждение отмены             │    │
│  │  6. АВТОМАТИЧЕСКИ: returnAction.handle()            │    │
│  └─────────────────────────────────────────────────────┘    │
│                │                                            │
│                ▼ (наследование)                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │         КОНКРЕТНЫЕ ДИАЛОГИ (наследники)             │    │
│  ├─────────────────────────────────────────────────────┤    │
│  │ CreateClientDialogService                           │    │
│  │  • returnAction = ClientManagementCallbackHandler   │    │
│  │  • onStart(): "Введите имя"                         │    │
│  │  • onProcessInput(): шаги name→phone→email          │    │
│  │  • onCancel(): очистка (опционально)                │    │
│  ├─────────────────────────────────────────────────────┤    │
│  │ EditClientDialogService                             │    │
│  │  • returnAction = ClientManagementCallbackHandler   │    │
│  │  • onStart(): "Введите ID клиента"                  │    │
│  │  • onProcessInput(): ID → новые данные              │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                     ПОТОК СОБЫТИЙ                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. /start → StartCommandHandler → главное меню             │
│                                                             │
│  2. "Управление клиентами" → ClientManagementCallbackHandler│
│                                                             │
│  3. "Добавить клиента" → CreateClientCallbackHandler →      │
│     → CreateClientDialogService.startDialog()               │
│                                                             │
│  4. Бот: "Введите имя" + кнопка "❌ Отмена"                 │
│                                                             │
│  5. Пользователь: "Иван" → CommandDispatcher →              │
│     → DialogRegistry → CreateClientDialogService →          │
│     → шаг 1 сохранён, запрос телефона                       │
│                                                             │
│  6. Нажатие "❌ Отмена" → подтверждение                     │
│     "✅ Да, отменить" / "❌ Нет, продолжить"                │
│                                                             │
│  7. "✅ Да" → cancelDialog() →                              │
│     → ClientManagementCallbackHandler.handle() →            │
│     → меню управления клиентами                             │
│                                                             │
│  8. Завершение диалога → создание клиента →                 │
│     → ClientManagementCallbackHandler.handle()              │
│                                                             │
└─────────────────────────────────────────────────────────────┘

КЛЮЧЕВЫЕ ПРИНЦИПЫ:
1. BaseDialogService — каркас всех диалогов
2. Автоматические: отмена, подтверждение, возврат в меню
3. Наследники реализуют только бизнес-логику шагов
4. returnAction определяет, куда вернуться после диалога
5. Состояние изолировано в DialogContext
6. Диспетчеры сначала проверяют активные диалоги
```

Отобразить дерево проекта в терминале: tree /F